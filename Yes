// ==UserScript==
// @name         Auto Click "Yes, please" Button
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  Automatically click the "Yes, please" button when the "You're almost there" message is visible.
// @author       Your Name
// @match        https://queue.ticketmaster.sg/
// @match        https://tixcraft.queue-it.net/
// @updateURL    https://github.com/bfdissfho/My-Script/raw/main/alert
// @downloadURL  https://github.com/bfdissfho/My-Script/raw/main/alert
// @grant        none
// ==/UserScript==

(function() {
    'use strict';

    let messageInterval;
    let checkingMessage = true;
    let buttonInterval;

    function checkMessageAndButton() {
        const messageElement = document.querySelector('span[data-bind*="You\'re almost there"]');

        if (checkingMessage && messageElement && messageElement.style.display !== 'none') {
            clearInterval(messageInterval); // Stop checking message
            buttonInterval = setInterval(checkButtonAndClick, 10000); // Start checking button every 10 seconds
        }
    }

    function checkButtonAndClick() {
        const buttonElement = document.getElementById('buttonConfirmRedirect');
        if (buttonElement) {
            buttonElement.click();
            clearInterval(buttonInterval); // Clear the button checking interval
        }
    }

    // Check message every 60 seconds
    messageInterval = setInterval(checkMessageAndButton, 60000);
})();
